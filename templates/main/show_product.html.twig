{% extends 'base.html.twig' %}

{% block title %}{{ app_name }}{% endblock %}
{% block body %}
  <!-- Page Content -->
  <div class="m-5">
    <style>
      .carousel-control-next, .carousel-control-prev{
        width: auto;
        top: 20%;
      }
    </style>
    <div class="row">
      <div class="col-sm-1">
      </div>
      <section class="col-sm-10 col-md-8">
        <div class="row">
          <div class="row">
            <div class="col-lg-6 p-3 bg-light rounded">
              {% set img = '8.jpg' %}
              {% if productStore.produit.images|length %}
                {% set img = productStore.produit.images.0 %}
              {% endif %}
              <img class="card-img-top" src="{{ asset('img/'~img) }}" alt="">
            </div>
            <div class="col-lg-4 align-items-center m-5">
              <h5 class="text-dark d-inline">{{ productStore.produit.typeproduit.libelle }}</h5>
              <h5  class="d-inline float-right " style="color:#f5bd4c;">{{ productStore.prix }} €</h5>
              <h2 class="text-dark">{{ productStore.produit.nom }}</h2>
              <div class="mt-15">
                <a href="{{ path('addProductCart', {'store_id': productStore.store.id,'product_id': productStore.id  }) }}"
                   role="button" class="btn bg-dark d-block m-1 text-white">Ajouter
                  <i class="fa fa-cart-plus"></i>
                </a>
                <a href="{{ path('addProductCart', {'store_id': productStore.store.id,'product_id': productStore.id  }) }}"
                   role="button" class="btn d-block border-dark m-1">Favoris
                  <i class="fa fa-heart"></i>
                </a>
              </div>
              <div class="mt-15">
                <p>Moyens de paiement</p>
                <span>
                                <i class="fa fa-cc-visa fa-2x"></i>
                                <i class="fa fa-cc-mastercard fa-2x"></i>
                                <i class="fa fa-cc-paypal fa-2x"></i>
                            </span>
              </div>
              <div class="mt-15 ">
                <h6 class="text-dark">Description:</h6>
                <p class="card-text text-justify">{{ productStore.produit.description }}</p>
              </div>

            </div>
          </div>
          <div class="row mt-100">

            <div class="d-block ml-5 mr-5">
              <div>
                <i class="fa fa-home fa-2x"></i>
              </div>
              <h4 class="h4 text-dark">{{ "Nom de mon magasin" }}</h4>
              <h6 class="text-dark">{{ "24 rue du magasin, 75018 Paris" }}</h6>
            </div>
            <div class="align-items-center m-5">
              <p class="card-text text-justify">
                Voyez ce jeu exquis wallon, de graphie en kit mais bref. Portez ce vieux whisky au juge blond qui fume sur son île intérieure, à côté de l'alcôve ovoïde, où les bûches se consument dans l'âtre, ce qui lui permet de penser à la cænogenèse de l'être dont il est question dans la cause ambiguë entendue à Moÿ, dans un capharnaüm qui, pense-t-il, diminue çà et là la qualité de son œuvre. Prouvez, beau juge, que le fameux sandwich au yak tue. L'île exiguë,
              </p>
            </div>
          </div>
        </div>
        <div class="row mt-100">
          <h4 class="text-dark mb-5">Vous aimerez peut-être :</h4>
          <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
              <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <div class="row">
                  <div class="col-3">
                    <div class="col bg-light rounded p-2">
                      <img class="card-img-top" src="{{ asset('img/3.jpg') }}" alt="">
                    </div>
                    <h5 class="text-dark">Nom du produit</h5>
                    <p>2.39€</p>
                  </div>
                  <div class="col-3">
                    <div class="col bg-light rounded p-2">
                      <img class="card-img-top" src="{{ asset('img/3.jpg') }}" alt="">
                    </div>
                    <h5 class="text-dark">Nom du produit</h5>
                    <p>2.39€</p>
                  </div>
                  <div class="col-3">
                    <div class="col bg-light rounded p-2">
                      <img class="card-img-top" src="{{ asset('img/3.jpg') }}" alt="">
                    </div>
                    <h5 class="text-dark">Nom du produit</h5>
                    <p>2.39€</p>
                  </div>
                  <div class="col-3">
                    <div class="col bg-light rounded p-2">
                      <img class="card-img-top" src="{{ asset('img/3.jpg') }}" alt="">
                    </div>
                    <h5 class="text-dark">Nom du produit</h5>
                    <p>2.39€</p>
                  </div>


                </div>
              </div>
              <div class="carousel-item">
                <div class="row">
                  <div class="col-3">
                    <div class="col bg-light rounded p-2">
                      <img class="card-img-top" src="{{ asset('img/3.jpg') }}" alt="">
                    </div>
                    <h5 class="text-dark">Nom du produit</h5>
                    <p>2.39€</p>
                  </div>
                  <div class="col-3">
                    <div class="col bg-light rounded p-2">
                      <img class="card-img-top" src="{{ asset('img/3.jpg') }}" alt="">
                    </div>
                    <h5 class="text-dark">Nom du produit</h5>
                    <p>2.39€</p>
                  </div>

                </div>
              </div>
            </div>
            <a class="carousel-control-prev h-25 bg-dark" href="#carouselExampleIndicators" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next bg-dark h-25" href="#carouselExampleIndicators" role="button" data-slide="next">
              <span class="carousel-control-next-icon " aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
        </div>
      </section>
      <div class="clearfix visible-sm"></div>
      <div class="col-md-3">
        {% if(cart|length) %}
          <div class="row">
            <table class="table table-hover  text-center">
              <h4 class="text-dark">Mon panier</h4>
              <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Nom</th>
                <th scope="col">Quantité</th>
                <th scope="col"></th>
                <th scope="col">Prix</th>
                <th scope="col"></th>
              </tr>
              </thead>
              <tbody>
              <!-- TODO loop on cart to display product's cart -->
              {% set i = 0 %}
              {% set totalPrice = 0 %}
              {% for productCart in cart %}
                <tr>
                  {% set i = i + 1 %}
                  <th scope="row">{{ i }}</th>
                  <td>{{ productCart.product.produit.nom }}</td>
                  <td>
                    {{ productCart.quantity }}
                  </td>
                  <td>
                    <a href="{{ path('addProductCart', {'store_id': productCart.product.store.id,'product_id': productCart.product.id  }) }}" class="d-block">
                      <i class="fa fa-plus text-success"></i>
                    </a>
                    <a href="{{ path('deleteProductCart', {'product_id': productCart.product.id  }) }}">
                      <i class="fa fa-minus text-danger"></i>
                    </a>
                  </td>
                  {% set totalPrice = productCart.total_price + totalPrice %}
                  <td class="col-2">{{ productCart.total_price }} €</td>
                  <td>
                    <a href="{{ path('deleteAllProductCart', {'product_id': productCart.product.id  }) }}" type="submit" class="btn bg-warning">
                      <i class="fa fa-trash-o text-light"></i>
                    </a>
                  </td>
                </tr>
              {% endfor %}
              </tbody>
              <tfoot>
              <tr>
                <th></th>
                <td></td>
                <td class="font-weight-bold">Total:</td>
                <td></td>
                <td><span class="font-weight-bold ">{{ totalPrice }} €</span></td>
                <td>
                  <a type="button" class="btn bg-dark p-2 m-2 w-100 d-block m-1 text-white" href="{{ path('deleteAllCart') }}">Vider le panier</a>
                  <a type="button" class="btn bg-success p-2 m-2 w-100" href="{{ path('validateCart') }}">
                    <i class="fa fa-money"></i> Payer</a>
                </td>
              </tr>
              </tfoot>
            </table>
          </div>
        {% endif %}
      </div>
    </div>
  </div>

{% endblock %}